<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
        <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
        <script>

 AFRAME.registerComponent('run', {
    init: function()
    {
        this.m0 = document.querySelector("#m0");
        this.m1 = document.querySelector("#m1");
        this.p0 = new THREE.Vector3();
        this.p1 = new THREE.Vector3();

        let geometry = new THREE.CylinderGeometry( 0.05, 0.05, 1, 12 );
        geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, 0.5, 0 ) );
        geometry.applyMatrix( new THREE.Matrix4().makeRotationX( THREE.Math.degToRad( 90 ) ) );
        let material = new THREE.MeshLambertMaterial( {color: 0xFF0000} );
        this.cylinder = new THREE.Mesh( geometry, material );
        this.cylinderGroup = document.querySelector('#cylinderGroup').object3D;
        this.cylinderGroup.add( this.cylinder );
    },

    tick: function (time, deltaTime)
    {
        if ( markerVisible["m0"] && markerVisible["m1"] )
        {
            this.m0.object3D.getWorldPosition(this.p0);
            this.m1.object3D.getWorldPosition(this.p1);

            let distance = this.p0.distanceTo( this.p1 );
            this.cylinderGroup.lookAt( this.p1 );
            this.cylinder.scale.set(1,1,distance);
            this.cylinder.visible = true;
        }
        else
        {
            this.cylinder.visible = false;
        }
    }
});
            
            
             AFRAME.registerComponent('run', {
    init: function()
    {
        this.m0 = document.querySelector("#m0");
        this.m1 = document.querySelector("#m2");
        this.p0 = new THREE.Vector3();
        this.p1 = new THREE.Vector3();

        let geometry = new THREE.CylinderGeometry( 0.05, 0.05, 1, 12 );
        geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, 0.5, 0 ) );
        geometry.applyMatrix( new THREE.Matrix4().makeRotationX( THREE.Math.degToRad( 90 ) ) );
        let material = new THREE.MeshLambertMaterial( {color: 0xFF0000} );
        this.cylinder = new THREE.Mesh( geometry, material );
        this.cylinderGroup = document.querySelector('#cylinderGroup').object3D;
        this.cylinderGroup.add( this.cylinder );
    },

    tick: function (time, deltaTime)
    {
        if ( markerVisible["m0"] && markerVisible["m2"] )
        {
            this.m0.object3D.getWorldPosition(this.p0);
            this.m1.object3D.getWorldPosition(this.p1);

            let distance = this.p0.distanceTo( this.p1 );
            this.cylinderGroup.lookAt( this.p1 );
            this.cylinder.scale.set(1,1,distance);
            this.cylinder.visible = true;
        }
        else
        {
            this.cylinder.visible = false;
        }
    }
});
            
            
 AFRAME.registerComponent('run', {
    init: function()
    {
        this.m0 = document.querySelector("#m0");
        this.m1 = document.querySelector("#m3");
        this.p0 = new THREE.Vector3();
        this.p1 = new THREE.Vector3();

        let geometry = new THREE.CylinderGeometry( 0.05, 0.05, 1, 12 );
        geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, 0.5, 0 ) );
        geometry.applyMatrix( new THREE.Matrix4().makeRotationX( THREE.Math.degToRad( 90 ) ) );
        let material = new THREE.MeshLambertMaterial( {color: 0xFF0000} );
        this.cylinder = new THREE.Mesh( geometry, material );
        this.cylinderGroup = document.querySelector('#cylinderGroup').object3D;
        this.cylinderGroup.add( this.cylinder );
    },

    tick: function (time, deltaTime)
    {
        if ( markerVisible["m0"] && markerVisible["m3"] )
        {
            this.m0.object3D.getWorldPosition(this.p0);
            this.m1.object3D.getWorldPosition(this.p1);

            let distance = this.p0.distanceTo( this.p1 );
            this.cylinderGroup.lookAt( this.p1 );
            this.cylinder.scale.set(1,1,distance);
            this.cylinder.visible = true;
        }
        else
        {
            this.cylinder.visible = false;
        }
    }
});
            
            
            
            
AFRAME.registerComponent('run', {
    init: function()
    {
        this.m0 = document.querySelector("#m0");
        this.m1 = document.querySelector("#m4");
        this.p0 = new THREE.Vector3();
        this.p1 = new THREE.Vector3();

        let geometry = new THREE.CylinderGeometry( 0.05, 0.05, 1, 12 );
        geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, 0.5, 0 ) );
        geometry.applyMatrix( new THREE.Matrix4().makeRotationX( THREE.Math.degToRad( 90 ) ) );
        let material = new THREE.MeshLambertMaterial( {color: 0xFF0000} );
        this.cylinder = new THREE.Mesh( geometry, material );
        this.cylinderGroup = document.querySelector('#cylinderGroup').object3D;
        this.cylinderGroup.add( this.cylinder );
    },

    tick: function (time, deltaTime)
    {
        if ( markerVisible["m0"] && markerVisible["m4"] )
        {
            this.m0.object3D.getWorldPosition(this.p0);
            this.m1.object3D.getWorldPosition(this.p1);

            let distance = this.p0.distanceTo( this.p1 );
            this.cylinderGroup.lookAt( this.p1 );
            this.cylinder.scale.set(1,1,distance);
            this.cylinder.visible = true;
        }
        else
        {
            this.cylinder.visible = false;
        }
    }
});
            
        </script>
    </head>

    <body style="margin: 0; overflow: hidden;">
        <a-scene
            renderer="logarithmicDepthBuffer: true;"
            embedded
            loading-screen="enabled: false;"
            arjs="sourceType: webcam; debugUIEnabled: false;"
        >
            <a-assets>
                <a-asset-item
                    id="animated-asset"
                    src="assets/asset.gltf"
                ></a-asset-item>
            </a-assets>

                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    id="m0"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30906867; longitude: 120.0599634;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    id="m1"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30892868; longitude: 120.0595004;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    id="m2"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30827079; longitude: 120.0593102;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    id="m3"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30840798; longitude: 120.0597093;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    id="m4"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30862935; longitude: 120.0596189;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30861376; longitude: 120.0594848;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.3085327; longitude: 120.0589641;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30908286414483; longitude: 120.06041061133148;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.309372775959808; longitude: 120.06026577204467;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.309663613064064; longitude: 120.0601799413562;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.309954449446643; longitude: 120.06005655974151;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.309777539515615; longitude: 120.05989026278259;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30962749008068; longitude: 120.05994390696289;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30955246520641; longitude: 120.06001364439727;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.309468178081783; longitude: 120.05994390696289;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30943020244567; longitude: 120.06008874624969;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30932646423033; longitude: 120.06013166159393;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30927459515216; longitude: 120.06009411066773;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.309190307647242; longitude: 120.06015311926605;"
                ></a-entity>
                <a-entity
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.06905123661735366 0.06905123661735366 0.06905123661735366"
                    gps-entity-place="latitude: 30.30908286414483; longitude: 120.06006728857757;"
                ></a-entity>


            <a-camera gps-camera rotation-reader></a-camera>
        </a-scene>
    </body>
</html>
